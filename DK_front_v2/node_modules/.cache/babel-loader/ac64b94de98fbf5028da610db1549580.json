{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\SemiProject\\\\DK_front_v2\\\\src\\\\components\\\\SearchWrite.js\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport { useState, useEffect } from 'react';\nimport Loader from \"./Loader\";\nimport goodIcon from \"../resource/kirby_icon6.png\";\nimport commentIcon from \"../resource/kirby_icon7.png\";\nimport api from \"../api/api\";\nimport useInfiniteScroll from \"./hooks/useInfiniteScroll\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SearchWrite = props => {\n  _s();\n  const [writes, setWrties] = useState([]);\n  const [offset, setOffset] = useState(0);\n  const [isMax, setIsMax] = useState(false);\n  const onClickWrite = val => {\n    console.log(\"상세 게시글로 이동 : \" + val);\n    window.localStorage.setItem(\"Detail\", val);\n  };\n  const writeItems = async () => {\n    try {\n      if (isMax) {\n        setIsFetching(false);\n        console.log('//max Data');\n        return;\n      }\n      console.log('//new Data Fetcing');\n      const fetchData = async () => {\n        // 검색결과 글 불러오는 api 호출\n        console.log(\"검색결과 불러오는중\");\n        const response = await api.writeSearch(props.query, String(offset), String(offset + 10)); // 게시판 페이지 게시글 목록 api\n        setWrties(old => [...old, ...response.data]);\n        console.log('//new Data :', response.data);\n        setOffset(old => old + 10); // offset을 계속 10씩 늘려주면 된다\n        setIsFetching(false); // fetching이 false가 되어야 한번만 데이터를 불러줌 패칭 스테이트는 선언한 훅에서 나옴\n        if (response.data.length < 10) setIsMax(true);\n      };\n      fetchData();\n    } catch (e) {\n      console.log(e);\n    }\n    ;\n  };\n  // hook 선언 (인자값에는 데이터를 불러오는 함수 입력(writeItems))\n  const [isFetching, setIsFetching] = useInfiniteScroll(writeItems);\n  useEffect(() => {\n    writeItems();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [writes && writes.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"write\",\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/write\",\n        onClick: () => onClickWrite(item.writeNum),\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"wname\",\n          children: item.writeName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"wcontent\",\n          children: item.writeContent\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"time\", {\n          children: item.writeDate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"nickname\",\n          children: item.nickname\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"status\",\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"good\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: goodIcon,\n              alt: \"\\uC88B\\uC544\\uC694\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: item.countGood\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"comment\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: commentIcon,\n              alt: \"\\uB313\\uAE00\\uC218\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: item.countComments\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }, this)), isFetching && /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"New Data Fetcing .......\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 26\n    }, this), !isFetching && /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\uB354\\uC774\\uC0C1 \\uC870\\uD68C\\uD560 \\uAC8C\\uC2DC\\uAE00\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 27\n    }, this)]\n  }, void 0, true);\n};\n_s(SearchWrite, \"Fne4XD1jwjyUOHHg+/8KMT0Kvc0=\", false, function () {\n  return [useInfiniteScroll];\n});\n_c = SearchWrite;\nexport default SearchWrite;\nvar _c;\n$RefreshReg$(_c, \"SearchWrite\");","map":{"version":3,"names":["axios","Link","useState","useEffect","Loader","goodIcon","commentIcon","api","useInfiniteScroll","SearchWrite","props","writes","setWrties","offset","setOffset","isMax","setIsMax","onClickWrite","val","console","log","window","localStorage","setItem","writeItems","setIsFetching","fetchData","response","writeSearch","query","String","old","data","length","e","isFetching","map","item","writeNum","writeName","writeContent","writeDate","nickname","countGood","countComments"],"sources":["C:/Users/User/SemiProject/DK_front_v2/src/components/SearchWrite.js"],"sourcesContent":["import axios from \"axios\"\r\nimport { Link } from \"react-router-dom\";\r\nimport { useState, useEffect } from 'react';\r\nimport Loader from \"./Loader\";\r\nimport goodIcon from \"../resource/kirby_icon6.png\";\r\nimport commentIcon from \"../resource/kirby_icon7.png\";\r\nimport api from \"../api/api\";\r\nimport useInfiniteScroll from \"./hooks/useInfiniteScroll\";\r\n\r\nconst SearchWrite = (props) =>{\r\n  const [writes, setWrties] = useState([]);\r\n  const [offset, setOffset] = useState(0);\r\n  const [isMax, setIsMax] = useState(false);\r\n\r\n  const onClickWrite = (val) => {\r\n    console.log(\"상세 게시글로 이동 : \" + val)\r\n    window.localStorage.setItem(\"Detail\", val);\r\n  }\r\n\r\n  const writeItems = async () => {\r\n    try {\r\n      if(isMax){\r\n        setIsFetching(false);\r\n        console.log('//max Data');\r\n        return;\r\n      }\r\n      console.log('//new Data Fetcing');\r\n      const fetchData = async () => {\r\n        // 검색결과 글 불러오는 api 호출\r\n        console.log(\"검색결과 불러오는중\");\r\n        const response = await api.writeSearch(props.query,String(offset),String(offset + 10)); // 게시판 페이지 게시글 목록 api\r\n        setWrties(old => ([...old, ...response.data]));\r\n        console.log('//new Data :',response.data);\r\n        setOffset(old => old + 10) // offset을 계속 10씩 늘려주면 된다\r\n        setIsFetching(false); // fetching이 false가 되어야 한번만 데이터를 불러줌 패칭 스테이트는 선언한 훅에서 나옴\r\n        if(response.data.length < 10) setIsMax(true);\r\n      }\r\n      fetchData();\r\n    } catch(e) {\r\n      console.log(e);\r\n    };\r\n  }\r\n  // hook 선언 (인자값에는 데이터를 불러오는 함수 입력(writeItems))\r\n  const [isFetching,setIsFetching] = useInfiniteScroll(writeItems)\r\n\r\n\r\n  useEffect(() => {\r\n    writeItems();\r\n  }, []);\r\n\r\n  return(\r\n    <>\r\n    {writes && writes.map((item) => (\r\n    <div className=\"write\">\r\n    <Link to=\"/write\" onClick={()=>onClickWrite(item.writeNum)}>\r\n      <h2 className=\"wname\">{item.writeName}</h2>\r\n      <p className=\"wcontent\">\r\n      {item.writeContent}</p>\r\n      <time>{item.writeDate}</time>\r\n      <h3 className=\"nickname\">{item.nickname}</h3>\r\n      <ul className=\"status\">\r\n        <li className=\"good\">\r\n          <img src={goodIcon} alt=\"좋아요\"/>\r\n          <span>{item.countGood}</span>\r\n        </li>\r\n        <li className=\"comment\">\r\n          <img src={commentIcon} alt=\"댓글수\"/>\r\n          <span>{item.countComments}</span>\r\n        </li>\r\n      </ul>\r\n    </Link>\r\n    </div>\r\n          ))}\r\n          {isFetching && <h1>New Data Fetcing .......</h1>}\r\n          {!isFetching && <h1>더이상 조회할 게시글이 없습니다</h1>}\r\n    </>\r\n  );\r\n};\r\nexport default SearchWrite;"],"mappings":"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"},"metadata":{},"sourceType":"module"}