{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\SemiProject\\\\DK_front_v2\\\\src\\\\pages\\\\EmailChange.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport api from \"../api/api\";\nimport '../style/emailchange.scss';\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EmailChange = () => {\n  _s();\n  const [memberInfo, setMemberInfo] = useState('');\n  const [inputEmail, setInputEmail] = useState('');\n  const getNickname = window.localStorage.getItem(\"userNickname\");\n\n  //유효성 검사\n  const [isEmail, setIsEmail] = useState(false);\n\n  //오류메시지\n  const [emailMessage, setEmailMessage] = useState(\"\");\n\n  //기존 이메일 출력\n  useEffect(() => {\n    const memberData = async () => {\n      try {\n        const response = await api.memberInfo(getNickname);\n        setMemberInfo(response.data);\n        console.log(response.data);\n      } catch (e) {\n        console.log(e);\n      }\n    };\n    memberData();\n  }, []);\n\n  //새 이메일 변경\n  //변경을 누르면 새로운 이메일이 db에 변경됨\n  const onClickEmailUpdate = async () => {\n    try {\n      const memberUpdate = await api.memberUpdate(inputEmail, \"mail\", getNickname);\n      console.log(memberUpdate.data.result);\n      if (memberUpdate.data.result === \"OK\") {\n        window.location.replace(\"/memberInfo\");\n      } else {}\n    } catch (e) {\n      console.log(e);\n      console.log(\"이메일 변경 에러...!\");\n    }\n  };\n\n  // const onChangemail = (e) => {\n  //     setInputEmail(e.target.value)\n  // }\n\n  const onChangemail = e => {\n    const emailRegex = /^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/i;\n    const emailCurrent = e.target.value;\n    setInputEmail(emailCurrent);\n    if (!emailRegex.test(emailCurrent)) {\n      setEmailMessage('이메일 형식이 아닙니다.');\n      setIsEmail(false);\n    } else {\n      setEmailMessage('');\n      setIsEmail(true);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"emailchangeWrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"emailchange_container\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"email_change\",\n        children: \"\\uC774\\uBA54\\uC77C \\uBCC0\\uACBD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"email_current\",\n        children: \"\\uD604\\uC7AC \\uC774\\uBA54\\uC77C \\uC8FC\\uC18C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }, this), memberInfo && memberInfo.map(member => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"email_current2\",\n          children: member.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this)\n      }, member.nickname, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this)), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"email_new\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\uC0C8 \\uC774\\uBA54\\uC77C \\uC8FC\\uC18C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          value: inputEmail,\n          className: \"email_change_input\",\n          onChange: onChangemail\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"email_hint\",\n        children: inputEmail.length > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `message ${isEmail ? 'success' : 'error'}`,\n          children: emailMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"email_change_yes\",\n          onClick: onClickEmailUpdate,\n          children: \"\\uBCC0\\uACBD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/memberinfo\",\n          className: \"email_cancle\",\n          children: \"\\uCDE8\\uC18C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n};\n_s(EmailChange, \"lGFdR9Si1ih67QkVFAuSR2BX7c4=\");\n_c = EmailChange;\nexport default EmailChange;\nvar _c;\n$RefreshReg$(_c, \"EmailChange\");","map":{"version":3,"names":["useState","useEffect","api","Link","EmailChange","memberInfo","setMemberInfo","inputEmail","setInputEmail","getNickname","window","localStorage","getItem","isEmail","setIsEmail","emailMessage","setEmailMessage","memberData","response","data","console","log","e","onClickEmailUpdate","memberUpdate","result","location","replace","onChangemail","emailRegex","emailCurrent","target","value","test","map","member","email","nickname","length"],"sources":["C:/Users/User/SemiProject/DK_front_v2/src/pages/EmailChange.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport api from \"../api/api\";\r\nimport '../style/emailchange.scss';\r\nimport { Link } from \"react-router-dom\";\r\n\r\n\r\nconst EmailChange = () => {\r\n    const [memberInfo, setMemberInfo] = useState('');\r\n    const [inputEmail, setInputEmail] = useState('');\r\n    const getNickname = window.localStorage.getItem(\"userNickname\");\r\n\r\n    //유효성 검사\r\n    const [isEmail, setIsEmail] = useState(false)\r\n\r\n    //오류메시지\r\n    const [emailMessage, setEmailMessage] = useState(\"\");\r\n\r\n    //기존 이메일 출력\r\n    useEffect(() => {    \r\n    const memberData = async () => {\r\n        try {\r\n            const response = await api.memberInfo(getNickname);\r\n            setMemberInfo(response.data);\r\n            console.log(response.data)\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    };\r\n    memberData();\r\n    }, []);\r\n\r\n    //새 이메일 변경\r\n    //변경을 누르면 새로운 이메일이 db에 변경됨\r\n    const onClickEmailUpdate = async() => {\r\n        try {\r\n            const memberUpdate = await api.memberUpdate(inputEmail, \"mail\", getNickname);\r\n            console.log(memberUpdate.data.result);\r\n            \r\n            if(memberUpdate.data.result === \"OK\") {\r\n                window.location.replace(\"/memberInfo\");\r\n            } else {\r\n            }\r\n        } catch (e) {\r\n            console.log(e);\r\n            console.log(\"이메일 변경 에러...!\");\r\n        }\r\n    }\r\n\r\n\r\n    // const onChangemail = (e) => {\r\n    //     setInputEmail(e.target.value)\r\n    // }\r\n\r\n    const onChangemail = (e) => {\r\n        const emailRegex = /^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/i;\r\n        const emailCurrent = e.target.value ;\r\n        setInputEmail(emailCurrent);\r\n        if (!emailRegex.test(emailCurrent)) {\r\n            setEmailMessage('이메일 형식이 아닙니다.')\r\n            setIsEmail(false)\r\n        } else {\r\n            setEmailMessage('')\r\n            setIsEmail(true);\r\n        }        \r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"emailchangeWrapper\">\r\n            <div className=\"emailchange_container\">\r\n            <p className=\"email_change\">이메일 변경</p>\r\n            <p className=\"email_current\">현재 이메일 주소</p>\r\n            {memberInfo && memberInfo.map(member => (\r\n                <div key={member.nickname}>\r\n                    <p className=\"email_current2\">{member.email}</p>\r\n                </div>\r\n            ))}\r\n            {/* <div >\r\n                    <p className=\"email_current2\">rabbit@gmail.com</p>\r\n            </div> */}\r\n            <p className=\"email_new\">\r\n                <p>새 이메일 주소</p>\r\n                <input type=\"email\" value={inputEmail} className=\"email_change_input\" onChange={onChangemail}></input>\r\n            </p>\r\n            <div className=\"email_hint\">\r\n                {inputEmail.length > 0 && (\r\n                <span className={`message ${isEmail ? 'success' : 'error'}`}>{emailMessage}</span>)}\r\n            </div>\r\n            <div>\r\n                <span className=\"email_change_yes\" onClick={onClickEmailUpdate}>변경</span>\r\n                <Link to='/memberinfo' className=\"email_cancle\">취소</Link>\r\n            </div>\r\n        </div>\r\n        </div>  \r\n    )\r\n} \r\nexport default EmailChange;"],"mappings":"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"},"metadata":{},"sourceType":"module"}