{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\SemiProject\\\\DK_front_v2\\\\src\\\\components\\\\MyWriteList.js\",\n  _s = $RefreshSig$();\nimport { Link } from \"react-router-dom\";\nimport goodIcon from \"../resource/kirby_icon6.png\";\nimport commentIcon from \"../resource/kirby_icon7.png\";\nimport { useState, useEffect } from \"react\";\nimport api from \"../api/api\";\nimport useInfiniteScroll from \"./hooks/useInfiniteScroll\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MyWriteList = () => {\n  _s();\n  const getNickname = window.localStorage.getItem(\"userNickname\");\n  const memberNum = window.localStorage.getItem(\"memberNum\");\n  const [writes, setWrties] = useState('');\n  const [offset, setOffset] = useState(0);\n  const [isMax, setIsMax] = useState(false);\n  const onClickWrite = val => {\n    console.log(\"상세 게시글로 이동 : \" + val);\n    window.localStorage.setItem(\"Detail\", val);\n  };\n  const writeItems = async () => {\n    try {\n      if (isMax) {\n        console.log('//max Data');\n        return;\n      }\n      console.log('//new Data Fetcing');\n      const fetchData = async () => {\n        const response = await api.myWriteList(String(memberNum), String(offset), String(offset + 10));\n        setWrties(old => [...old, ...response.data]);\n        console.log('//new Data :', response.data);\n        setOffset(old => old + 10); // offset을 계속 10씩 늘려주면 된다\n        setIsFetching(false); // fetching이 false가 되어야 한번만 데이터를 불러줌 패칭 스테이트는 선언한 훅에서 나옴\n        if (response.data.length < 10) setIsMax(true);\n      };\n      fetchData();\n    } catch (e) {\n      console.log(e);\n    }\n    ;\n  };\n  // hook 선언 (인자값에는 데이터를 불러오는 함수 입력(writeItems))\n  const [isFetching, setIsFetching] = useInfiniteScroll(writeItems);\n  useEffect(() => {\n    // setLoading(true)\n    writeItems();\n    // setLoading(false)\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"write\",\n    children: [writes && writes.map((item, index) => /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/write\",\n      onClick: () => onClickWrite(item.writeNum),\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"wname\",\n        children: item.writeName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"wcontent\",\n        children: item.writeContents\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"time\", {\n        children: item.writeDate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"nickname\",\n        children: item.nickName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"status\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"good\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: goodIcon,\n            alt: \"\\uC88B\\uC544\\uC694\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: item.countGood\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"comment\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: commentIcon,\n            alt: \"\\uB313\\uAE00\\uC218\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: item.countComment\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 3\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 1\n    }, this)), isFetching && /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"New Data Fetcing .......\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 22\n    }, this), !isFetching && /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\uB354\\uC774\\uC0C1 \\uC870\\uD68C\\uD560 \\uAC8C\\uC2DC\\uAE00\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 23\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n_s(MyWriteList, \"SoNPUqkZbSeEvxXGQK6FNFPrP/k=\", false, function () {\n  return [useInfiniteScroll];\n});\n_c = MyWriteList;\nexport default MyWriteList;\nvar _c;\n$RefreshReg$(_c, \"MyWriteList\");","map":{"version":3,"names":["Link","goodIcon","commentIcon","useState","useEffect","api","useInfiniteScroll","MyWriteList","getNickname","window","localStorage","getItem","memberNum","writes","setWrties","offset","setOffset","isMax","setIsMax","onClickWrite","val","console","log","setItem","writeItems","fetchData","response","myWriteList","String","old","data","setIsFetching","length","e","isFetching","map","item","index","writeNum","writeName","writeContents","writeDate","nickName","countGood","countComment"],"sources":["C:/Users/User/SemiProject/DK_front_v2/src/components/MyWriteList.js"],"sourcesContent":["import { Link } from \"react-router-dom\";\r\nimport goodIcon from \"../resource/kirby_icon6.png\";\r\nimport commentIcon from \"../resource/kirby_icon7.png\";\r\nimport { useState, useEffect } from \"react\";\r\nimport api from \"../api/api\";\r\nimport useInfiniteScroll from \"./hooks/useInfiniteScroll\";\r\n\r\nconst MyWriteList = () =>{\r\n\r\n  const getNickname = window.localStorage.getItem(\"userNickname\");\r\n  const memberNum = window.localStorage.getItem(\"memberNum\");\r\n  const [writes, setWrties] = useState('');\r\n  const [offset, setOffset] = useState(0);\r\n  const [isMax, setIsMax] = useState(false);\r\n\r\n  const onClickWrite = (val) => {\r\n    console.log(\"상세 게시글로 이동 : \" + val)\r\n    window.localStorage.setItem(\"Detail\", val);\r\n  }\r\n\r\n  const writeItems = async () => {\r\n    try {\r\n      if(isMax){\r\n        console.log('//max Data');\r\n        return;\r\n      }\r\n      console.log('//new Data Fetcing');\r\n      const fetchData = async () => {\r\n        const response = await api.myWriteList(String(memberNum),String(offset),String(offset + 10));\r\n        setWrties(old => ([...old, ...response.data]));\r\n        console.log('//new Data :',response.data);\r\n        setOffset(old => old + 10) // offset을 계속 10씩 늘려주면 된다\r\n        setIsFetching(false); // fetching이 false가 되어야 한번만 데이터를 불러줌 패칭 스테이트는 선언한 훅에서 나옴\r\n        if(response.data.length < 10) setIsMax(true);\r\n      }\r\n      fetchData();\r\n    } catch(e) {\r\n      \r\n      console.log(e);\r\n    };\r\n  }\r\n  // hook 선언 (인자값에는 데이터를 불러오는 함수 입력(writeItems))\r\n  const [isFetching,setIsFetching] = useInfiniteScroll(writeItems)\r\n\r\n\r\n  useEffect(() => {\r\n    // setLoading(true)\r\n    writeItems();\r\n    // setLoading(false)\r\n  }, []);\r\n\r\n\r\n  return(\r\n    <div className=\"write\">\r\n\r\n{writes && writes.map((item,index) => (\r\n\r\n<Link key={index} to=\"/write\" onClick={()=>onClickWrite(item.writeNum)}>\r\n  <h2 className=\"wname\">{item.writeName}</h2>\r\n  <p className=\"wcontent\">\r\n  {item.writeContents}</p>\r\n  <time>{item.writeDate}</time>\r\n  <h3 className=\"nickname\">{item.nickName}</h3>\r\n  <ul className=\"status\">\r\n    <li className=\"good\">\r\n      <img src={goodIcon} alt=\"좋아요\"/>\r\n      <span>{item.countGood}</span>\r\n    </li>\r\n    <li className=\"comment\">\r\n      <img src={commentIcon} alt=\"댓글수\"/>\r\n      <span>{item.countComment}</span>\r\n    </li>\r\n  </ul>\r\n</Link>\r\n      ))}\r\n      {isFetching && <h1>New Data Fetcing .......</h1>} \r\n      {!isFetching && <h1>더이상 조회할 게시글이 없습니다</h1>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyWriteList;"],"mappings":";;AAAA,SAASA,IAAI,QAAQ,kBAAkB;AACvC,OAAOC,QAAQ,MAAM,6BAA6B;AAClD,OAAOC,WAAW,MAAM,6BAA6B;AACrD,SAASC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,GAAG,MAAM,YAAY;AAC5B,OAAOC,iBAAiB,MAAM,2BAA2B;AAAC;AAE1D,MAAMC,WAAW,GAAG,MAAK;EAAA;EAEvB,MAAMC,WAAW,GAAGC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;EAC/D,MAAMC,SAAS,GAAGH,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;EAC1D,MAAM,CAACE,MAAM,EAAEC,SAAS,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACY,MAAM,EAAEC,SAAS,CAAC,GAAGb,QAAQ,CAAC,CAAC,CAAC;EACvC,MAAM,CAACc,KAAK,EAAEC,QAAQ,CAAC,GAAGf,QAAQ,CAAC,KAAK,CAAC;EAEzC,MAAMgB,YAAY,GAAIC,GAAG,IAAK;IAC5BC,OAAO,CAACC,GAAG,CAAC,eAAe,GAAGF,GAAG,CAAC;IAClCX,MAAM,CAACC,YAAY,CAACa,OAAO,CAAC,QAAQ,EAAEH,GAAG,CAAC;EAC5C,CAAC;EAED,MAAMI,UAAU,GAAG,YAAY;IAC7B,IAAI;MACF,IAAGP,KAAK,EAAC;QACPI,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC;QACzB;MACF;MACAD,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC;MACjC,MAAMG,SAAS,GAAG,YAAY;QAC5B,MAAMC,QAAQ,GAAG,MAAMrB,GAAG,CAACsB,WAAW,CAACC,MAAM,CAAChB,SAAS,CAAC,EAACgB,MAAM,CAACb,MAAM,CAAC,EAACa,MAAM,CAACb,MAAM,GAAG,EAAE,CAAC,CAAC;QAC5FD,SAAS,CAACe,GAAG,IAAK,CAAC,GAAGA,GAAG,EAAE,GAAGH,QAAQ,CAACI,IAAI,CAAE,CAAC;QAC9CT,OAAO,CAACC,GAAG,CAAC,cAAc,EAACI,QAAQ,CAACI,IAAI,CAAC;QACzCd,SAAS,CAACa,GAAG,IAAIA,GAAG,GAAG,EAAE,CAAC,EAAC;QAC3BE,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC;QACtB,IAAGL,QAAQ,CAACI,IAAI,CAACE,MAAM,GAAG,EAAE,EAAEd,QAAQ,CAAC,IAAI,CAAC;MAC9C,CAAC;MACDO,SAAS,EAAE;IACb,CAAC,CAAC,OAAMQ,CAAC,EAAE;MAETZ,OAAO,CAACC,GAAG,CAACW,CAAC,CAAC;IAChB;IAAC;EACH,CAAC;EACD;EACA,MAAM,CAACC,UAAU,EAACH,aAAa,CAAC,GAAGzB,iBAAiB,CAACkB,UAAU,CAAC;EAGhEpB,SAAS,CAAC,MAAM;IACd;IACAoB,UAAU,EAAE;IACZ;EACF,CAAC,EAAE,EAAE,CAAC;EAGN,oBACE;IAAK,SAAS,EAAC,OAAO;IAAA,WAEzBX,MAAM,IAAIA,MAAM,CAACsB,GAAG,CAAC,CAACC,IAAI,EAACC,KAAK,kBAEjC,QAAC,IAAI;MAAa,EAAE,EAAC,QAAQ;MAAC,OAAO,EAAE,MAAIlB,YAAY,CAACiB,IAAI,CAACE,QAAQ,CAAE;MAAA,wBACrE;QAAI,SAAS,EAAC,OAAO;QAAA,UAAEF,IAAI,CAACG;MAAS;QAAA;QAAA;QAAA;MAAA,QAAM,eAC3C;QAAG,SAAS,EAAC,UAAU;QAAA,UACtBH,IAAI,CAACI;MAAa;QAAA;QAAA;QAAA;MAAA,QAAK,eACxB;QAAA,UAAOJ,IAAI,CAACK;MAAS;QAAA;QAAA;QAAA;MAAA,QAAQ,eAC7B;QAAI,SAAS,EAAC,UAAU;QAAA,UAAEL,IAAI,CAACM;MAAQ;QAAA;QAAA;QAAA;MAAA,QAAM,eAC7C;QAAI,SAAS,EAAC,QAAQ;QAAA,wBACpB;UAAI,SAAS,EAAC,MAAM;UAAA,wBAClB;YAAK,GAAG,EAAEzC,QAAS;YAAC,GAAG,EAAC;UAAK;YAAA;YAAA;YAAA;UAAA,QAAE,eAC/B;YAAA,UAAOmC,IAAI,CAACO;UAAS;YAAA;YAAA;YAAA;UAAA,QAAQ;QAAA;UAAA;UAAA;UAAA;QAAA,QAC1B,eACL;UAAI,SAAS,EAAC,SAAS;UAAA,wBACrB;YAAK,GAAG,EAAEzC,WAAY;YAAC,GAAG,EAAC;UAAK;YAAA;YAAA;YAAA;UAAA,QAAE,eAClC;YAAA,UAAOkC,IAAI,CAACQ;UAAY;YAAA;YAAA;YAAA;UAAA,QAAQ;QAAA;UAAA;UAAA;UAAA;QAAA,QAC7B;MAAA;QAAA;QAAA;QAAA;MAAA,QACF;IAAA,GAfIP,KAAK;MAAA;MAAA;MAAA;IAAA,QAiBT,CAAC,EACDH,UAAU,iBAAI;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAAiC,EAC/C,CAACA,UAAU,iBAAI;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAA0B;EAAA;IAAA;IAAA;IAAA;EAAA,QACtC;AAEV,CAAC;AAAC,GAxEI3B,WAAW;EAAA,QAmCoBD,iBAAiB;AAAA;AAAA,KAnChDC,WAAW;AA0EjB,eAAeA,WAAW;AAAC;AAAA"},"metadata":{},"sourceType":"module"}